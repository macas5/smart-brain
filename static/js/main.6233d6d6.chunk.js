(this["webpackJsonpsmart-brain"]=this["webpackJsonpsmart-brain"]||[]).push([[0],{102:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){},317:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},396:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),s=a(46),i=a.n(s),o=(a(102),a(19)),l=a(20),c=a(22),m=a(21),u=a(92),g=a.n(u),d=a(96),p=a.n(d),h=function(e){var t=e.onRouteChange;return e.isSignedIn?r.a.createElement("div",{className:"ml-auto fl-grow-99"},r.a.createElement("nav",{className:"flex justify-end flex-wrap"},r.a.createElement("p",{onClick:function(){return t("home")},className:"f3 link dim black underline pa3 pointer mb0"},"Home"),r.a.createElement("p",{onClick:function(){return t("rankings")},className:"f3 link dim black underline pa3 pointer mb0"},"Rankings"),r.a.createElement("p",{onClick:function(){return t("signout")},className:"f3 link dim black underline pa3 pointer mb0"},"Sign Out"))):r.a.createElement("div",{className:"ml-auto fl-grow-99"},r.a.createElement("nav",{className:"flex justify-end flex-wrap"},r.a.createElement("p",{onClick:function(){return t("signin")},className:"f3 link dim black underline pa3 pointer mb0"}," Sign In"),r.a.createElement("p",{onClick:function(){return t("register")},className:"f3 link dim black underline pa3 pointer mb0"}," Register")))},f=a(93),b=a.n(f),E=a(94),v=a.n(E),w=(a(315),function(){return r.a.createElement("div",{className:"ma4 fl-grow-1 flex justify-center justify-start-ns"},r.a.createElement(b.a,{className:"Tilt br2 shadow-2",options:{max:55},style:{height:150,width:150}},r.a.createElement("div",{className:"Tilt-inner pa3"},r.a.createElement("img",{src:v.a,alt:"logo"}))))}),k=(a(316),function(e){var t=e.onInputChange,a=e.onButtonSubmit,n=e.onEnterPress;return r.a.createElement("div",{className:"ma4 mt0"},r.a.createElement("p",{className:"f3"},"This Magic Brain will detect faces in your pictures. Give it a try"),r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"center form pa4 br3 shadow-5 flex flex-wrap justify-center"},r.a.createElement("input",{className:"mv1 f4 pa2 fl-grow-7 center minwidth0",type:"text",onKeyPress:n,onChange:t}),r.a.createElement("button",{className:"grow mv1 f4 link ph3 pv2 dib white bg-light-purple minw120 fl-grow-3 mw-30",onClick:a},"  Detect"))))}),N=function(e){var t=e.name,a=e.entries;return document.title="Smart Brain",r.a.createElement("div",null,r.a.createElement("div",{className:"mh4 white f3"},"".concat(t,", your current entry count is...")),r.a.createElement("div",{className:"white f1"},"".concat(a)))},S=a(47),y=function(e,t,a){return fetch("".concat("https://agile-hollows-89259.herokuapp.com","/").concat(e),Object(S.a)({method:"".concat(t),headers:{"Content-Type":"application/json"}},"GET"!==t&&{body:JSON.stringify(Object(S.a)({},a))})).then((function(e){return![400,404,500].includes(e.status)&&(409===e.status?-1:e.json())}))},C=a(95),I=a.n(C),R=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=function(e){return!!(e.includes("@")&&e.includes(".")&&e.length<65&&e.length>5&&("string"===typeof e||e instanceof String))},s=function(e){return e.length>2&&e.length<65&&("string"===typeof e||e instanceof String)},i=function(e){return e.length>1&&e.length<65&&!/[\d~`!#$%&*+=[\]\\';,/{}|\\":<>?]/.test(e)&&("string"===typeof e||e instanceof String)};return n?r(e)?s(t)?!!i(a)||-3:-2:-1:r(e)?!!s(t)||-2:-1},j=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this)).onNameChange=function(e){n.setState({name:e.target.value})},n.onEmailChange=function(e){n.setState({email:e.target.value})},n.onPasswordChange=function(e){e.target.value&&n.setState({password:e.target.value,pswStrength:I()(e.target.value).value})},n.onSubmitRegister=function(){var e=n.state,t=e.name,a=e.email,r=e.password,s=R(a,r,t,!0);if(s>0)y("register","post",{name:t,email:a,password:r}).then((function(e){-1===e?n.setState({errorMsg:"Email is already in use"}):e&&(n.setState({errorMsg:""}),localStorage.setItem("refreshToken",e.refreshToken),n.props.loadUser(e.accessToken),n.props.onRouteChange("signedin"))}));else switch(s){case-1:n.setState({errorMsg:"You must enter correct email format"});break;case-2:n.setState({errorMsg:"You must enter correct password format"});break;case-3:n.setState({errorMsg:"You must enter correct name format"});break;default:n.setState({errorMsg:"Unexpected error"})}},n.onEnterPress=function(e){"Enter"===e.key&&n.onSubmitRegister()},n.componentDidMount=function(){document.title="Register - Smart Brain"},n.state={email:"",password:"",name:"",pswStrength:"Weak",errorMsg:""},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("article",{className:"mv4 w-100 mw6-ns center"},r.a.createElement("main",{className:"br3 ba b--black-10 shadow-5 mh5-ns pa4 black-80"},r.a.createElement("div",{className:"measure"},r.a.createElement("fieldset",{id:"sign_up",className:"ba mw5 b--transparent ph0 mh0 center"},r.a.createElement("legend",{className:"f2 f1-ns fw6 ph0 mh0"},"Register"),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"name"},"Name"),r.a.createElement("input",{onKeyPress:this.onEnterPress,onChange:this.onNameChange,className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"text",name:"name",id:"name"})),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address"},"Email"),r.a.createElement("input",{onKeyPress:this.onEnterPress,onChange:this.onEmailChange,className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"email-address"})),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"password"},"Password"),r.a.createElement("input",{onKeyPress:this.onEnterPress,onChange:this.onPasswordChange,className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",title:"Password must contain at least 6 characters of which at least  1 must be a number"})),r.a.createElement("div",null,r.a.createElement("p",null,"Password strength: ",this.state.pswStrength))),r.a.createElement("div",{className:""},r.a.createElement("input",{onClick:this.onSubmitRegister,className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Register"})),r.a.createElement("div",{className:"lh-copy mt3"}),r.a.createElement("div",null,r.a.createElement("p",{className:"mb0 red"},this.state.errorMsg)))))}}]),a}(r.a.Component),x=(a(317),function(e){var t=e.imageUrl,a=e.box,n=e.errorMsg;if(n.length)return r.a.createElement("div",{className:"center ma"},r.a.createElement("p",{className:"red"},n));var s=a.map((function(e,t){return r.a.createElement("div",{key:t,className:"bounding-box",style:{top:e.topRow,right:e.rightCol,bottom:e.bottomRow,left:e.leftCol}})}));return r.a.createElement("div",{className:"flex justify-center ma"},r.a.createElement("div",{className:"absolute mt2"},r.a.createElement("img",{id:"inputimage",src:t,alt:"",width:"500px",height:"auto"}),s))}),P=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this)).onEmailChange=function(e){n.setState({signInEmail:e.target.value})},n.onPasswordChange=function(e){n.setState({signInPassword:e.target.value})},n.onSubmitSignIn=function(){var e=n.state,t=e.signInEmail,a=e.signInPassword,r=R(t,a);if(r>0)y("signin","post",{email:t,password:a}).then((function(e){console.log(e),e&&-1!==e?(localStorage.setItem("accessToken",e.accessToken),n.props.loadUser(e.accessToken),n.props.onRouteChange("signedin")):n.setState({errorMsg:"Incorrect username or password"})}));else switch(r){case-1:n.setState({errorMsg:"You must enter correct email format"});break;case-2:n.setState({errorMsg:"You must enter correct password format"});break;default:n.setState({errorMsg:"Unexpected error"})}},n.onEnterPress=function(e){"Enter"===e.key&&n.onSubmitSignIn()},n.componentDidMount=function(){document.title="Sign In - Smart Brain"},n.state={signInEmail:"",signInPassword:"",errorMsg:""},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.onRouteChange;return r.a.createElement("article",{className:"mv4 w-100 mw6-ns center"},r.a.createElement("main",{className:"br3 ba b--black-10 shadow-5 mh5-ns pa4 black-80"},r.a.createElement("div",{className:"measure"},r.a.createElement("fieldset",{id:"sign_up",className:"ba mw5 b--transparent ph0 mh0 center"},r.a.createElement("legend",{className:"f2 f1-ns fw6 ph0 mh0"},"Sign In"),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address"},"Email"),r.a.createElement("input",{onKeyPress:this.onEnterPress,onChange:this.onEmailChange,className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"email-address"})),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"password"},"Password"),r.a.createElement("input",{onKeyPress:this.onEnterPress,onChange:this.onPasswordChange,className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password"}))),r.a.createElement("div",{className:""},r.a.createElement("input",{onClick:this.onSubmitSignIn,className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Sign In"})),r.a.createElement("div",{className:"lh-copy mt3"},r.a.createElement("p",{onClick:function(){return e("register")},className:"f6 link dim black db pointer"},"Register"),r.a.createElement("div",null,r.a.createElement("p",{className:"mb0 red"},this.state.errorMsg))))))}}]),a}(r.a.Component),M=(a(318),function(e){var t=e.rankingsList,a=e.userRank,n=e.userEntries,s=t.slice(0,10).map((function(e,t){return e.entries>0?r.a.createElement("li",{key:"li"+e.id,className:"ph3 tl pv2 bb flex b--light-silver"},r.a.createElement("span",{key:"spanl"+e.id,className:"w2"},t+1,". "),r.a.createElement("span",{key:"spanm"+e.id,className:"mr-auto"},e.name),r.a.createElement("span",{key:"spanr"+e.id},e.entries)):r.a.createElement("li",{key:"li"+e.id,className:"ph3 tl pv2 bb flex b--light-silver"},r.a.createElement("span",{key:"spanl"+e.id,className:"w2"},t+1,". "),r.a.createElement("span",{key:"spanm"+e.id,className:"mr-auto"}),r.a.createElement("span",{key:"spanr"+e.id}))}));return document.title="Rankings - Smart Brain",r.a.createElement("div",null,r.a.createElement("h1",null,n>0?r.a.createElement("p",null,"Your current rank is: ",a):r.a.createElement("p",null,"You need to have a score higher than 0 to get a rank")),r.a.createElement("hr",{className:"center mw6 light-silver"}),r.a.createElement("h1",null,"Current user standings:"),r.a.createElement("ul",{className:"list pl0 ml0 center mw5 ba b--light-silver br3"},s))}),O=(a(319),{particles:{number:{value:100,density:{enable:!0,value_area:800}}}}),U={input:"",imageUrl:"",box:[{}],route:"loading",isSignedIn:!1,errorMsg:"",rankingsList:[{}],user:{id:"",name:"",email:"",entries:0,joined:"",rank:0}},B=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).loadUser=function(t){return fetch("".concat("https://agile-hollows-89259.herokuapp.com","/getuser"),{method:"get",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return e.json()})).then((function(t){return"Invalid"!==t&&(e.setState({user:{id:t.id,name:t.name,email:t.email,entries:t.entries,joined:t.joined},isSignedIn:!0}),!0)}))},e.calculateFaceLocation=function(e){var t=document.getElementById("inputimage"),a=Number(t.width),n=Number(t.height);return e.outputs[0].data.regions.map((function(e){var t=e.region_info.bounding_box;return{leftCol:t.left_col*a,topRow:t.top_row*n,rightCol:a-t.right_col*a,bottomRow:n-t.bottom_row*n}}))},e.displayFaceBox=function(t){e.setState({box:t})},e.onInputChange=function(t){e.setState({input:t.target.value})},e.onButtonSubmit=function(){e.setState({imageUrl:e.state.input}),p.a.isURL(e.state.input)?(e.setState({errorMsg:""}),y("imageurl","post",{input:e.state.input}).then((function(t){t&&-1!==t&&y("image","put",{id:e.state.user.id}).then((function(t){e.setState(Object.assign(e.state.user,{entries:t}))})).catch(console.log),e.displayFaceBox(e.calculateFaceLocation(t))})).catch((function(e){return console.log(e)}))):e.setState({errorMsg:"Please put in correct photo URL"})},e.onEnterPress=function(t){"Enter"===t.key&&e.onButtonSubmit()},e.onRouteChange=function(t){switch(t){case"home":e.setState({route:t});break;case"signedin":e.setState({isSignedIn:!0}),e.setState({route:"home"});break;case"rankings":e.updateRankingsList(),e.setState({route:t});break;case"register":case"loading":case"signin":e.setState({route:t});break;default:localStorage.removeItem("accessToken"),e.setState({route:"signin"}),e.setState(U)}},e.updateRankingsList=function(){return y("rankings","GET").then((function(t){for(var a=!1,n=0;!a||n<t.length;)t[n].id===e.state.user.id&&(Object.assign(e.state.user,{rank:n+1}),a=!0),n++;e.setState({rankingsList:t.map((function(e){return e}))})}))},e.state=U,e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state.isSignedIn,a=r.a.createElement("div",{className:"App"},r.a.createElement(g.a,{className:"particles",params:O}),r.a.createElement("div",{className:"flex flex-wrap justify-end flex-row-reverse"},"loading"!==this.state.route&&r.a.createElement(h,{isSignedIn:t,onRouteChange:this.onRouteChange}),r.a.createElement(w,null)),function(){var t=e.state,a=t.imageUrl,n=t.route,s=t.box,i=t.rankingsList,o=t.user,l=t.errorMsg;switch(n){case"signin":return r.a.createElement(P,{loadUser:e.loadUser,onRouteChange:e.onRouteChange,isSignedIn:e.isSignedIn});case"home":return r.a.createElement("div",null,r.a.createElement(N,{name:o.name,entries:o.entries}),r.a.createElement(k,{onInputChange:e.onInputChange,onButtonSubmit:e.onButtonSubmit,onEnterPress:e.onEnterPress}),r.a.createElement(x,{box:s,imageUrl:a,errorMsg:l}));case"rankings":return r.a.createElement(M,{rankingsList:i,userRank:o.rank,userEntries:o.entries});case"register":return r.a.createElement(j,{loadUser:e.loadUser,onRouteChange:e.onRouteChange});case"loading":return r.a.createElement("div",null);default:return r.a.createElement("p",null,"There were some problems getting route")}}());return"loading"===e.state.route&&e.loadUser(localStorage.getItem("accessToken")).then((function(t){return t?(e.onRouteChange("signedin"),a):(e.onRouteChange("signin"),a)})),a}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(395);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},94:function(e,t,a){e.exports=a.p+"static/media/brain.014560c0.svg"},97:function(e,t,a){e.exports=a(396)}},[[97,1,2]]]);
//# sourceMappingURL=main.6233d6d6.chunk.js.map